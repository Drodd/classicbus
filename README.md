# 田园公交

使用Three.js实现的3D分层场景，展示了一个在田野和山脉背景下行驶的巴士，并模拟乘客上下车与对话互动的生态系统。

## 项目特点

- **沉浸式3D场景**：使用Three.js实现的多层次平行移动背景和精美的巴士模型
- **游戏界面**：
  - 精美的开始界面，一句话简洁介绍游戏玩法
  - 直观的座位视图，显示巴士座位分布和乘客状态
- **乘客生态系统**：
  - 乘客自动生成与上下车机制
  - 路边等车的路人将会上车
  - 乘客有各自的旅行时间，到站后会下车
  - 正在对话的乘客不会在对话过程中下车
- **对话系统**：
  - 相邻座位的乘客会进行随机对话
  - 对话内容多样化，提供乘车趣味
  - 对话历史记录可查看，形成"田园轶事"
- **巴士控制**：
  - 启动/停车控制
  - 乘客需要下车时会有提示
- **直观的座位视图**：底部显示巴士座位分布和乘客状态

## 项目结构

- `index.html` - 主HTML文件，包含座位布局和基本UI
- `style.css` - 样式文件
- `main.js` - 主JavaScript文件，包含Three.js代码和乘客系统逻辑
- `server.js` - 简单的Node.js服务器，用于本地运行项目
- `start.sh` - 启动脚本
- `img/` - 包含所有图层图像

## 如何运行

### 使用提供的启动脚本（推荐）

```bash
chmod +x start.sh  # 确保脚本有执行权限
./start.sh
```

然后在浏览器中访问 `http://localhost:3000`

### 使用Python设置简单的本地服务器

```bash
# Python 3
python -m http.server

# Python 2
python -m SimpleHTTPServer
```

然后在浏览器中访问 `http://localhost:8000`

### 使用Node.js

```bash
node server.js
```

然后在浏览器中访问 `http://localhost:3000`

## 交互方式

- **场景控制**：
  - 使用鼠标拖动旋转场景
  - 滚轮缩放
  - 按住右键并拖动平移场景
- **巴士控制**：
  - 点击"停车"按钮使巴士停止
  - 空格键：启动/停止巴士
- **乘客互动**：
  - 乘客对话会自动触发
  - 乘客到站时会显示下车提示
  - 右上角可查看已下车的乘客数量
  - 可以查看"田园轶事"了解乘客间的对话故事

## 更新记录

- 增加游戏开始界面，标题为"田园公交"，提供游戏简介和开始按钮
- 优化了路人生成数量，每次生成3-6个路人
- 修复了正在对话的乘客下车逻辑，现在对话完成后才会下车
- UI文本优化：将"到站乘客"改为"到站人数"，"乘客故事"改为"田园轶事" 